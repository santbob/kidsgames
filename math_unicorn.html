<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>Math using Key Detection</title>
    <style type="text/css">
      body {
        background: #ebcbf4;
        padding: 10px;
      }
      #question {
        background: #5758BB;
        width: 100%;
        font-size: xxx-large;
        color: white;
        text-align: center;
        border-radius: 5px;
      }
    </style>
    <script type="text/javascript" src="http://www.cornify.com/js/cornify.js"></script>
</head>

<body>
    <div id='question'></div>
    <div id="corns"></div>
    <!-- <div class="answer-box"><input type="number" id="answer" /></div> -->
    <!-- <div><button id="check-answer">Check</button></div> -->
    <script>
    let answer = '';
    let answerLength = answer.length;
    const pressed = [];

    const questionElem = document.getElementById('question')
    cornify_setcookie('cornify', '0', 1);
    window.addEventListener('keyup', function(e) {
        if (!isNaN(parseInt(e.key))) {
            pressed.push(e.key);
            if (pressed.length > answerLength) {
                pressed.splice(0, pressed.length - answerLength);
            }
            checkAnswer()
        }
    });

    function setupNewQuestion() {
        const num1 = getRandomIntInclusive(1, 90)
        const num2 = getRandomIntInclusive(1, 9)

        question.textContent = `${num1} + ${num2} = `
        answer = `${num1 + num2}`
        answerLength = answer.length
        pressed.splice(0, pressed.length)
    }

    function checkAnswer() {
        console.log(pressed.join(''));
        if (pressed.join('').includes(answer)) {
            cornify_add();
            setupNewQuestion()
        }  
    }

    function getRandomIntInclusive(min, max) {
        min = Math.ceil(min);
        max = Math.floor(max);
        return Math.floor(Math.random() * (max - min + 1)) + min; //The maximum is inclusive and the minimum is inclusive
    }
    setupNewQuestion();
    </script>
</body>
</html>
